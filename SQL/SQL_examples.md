# Задача 1

Магазин счёл, что классика уже не пользуется популярностью, поэтому необходимо в выборке:

1. Сменить всех авторов на "Донцова Дарья".

2. К названию каждой книги в начале дописать "Евлампия Романова и".

3. Цену поднять на 42%.

4. Отсортировать по убыванию цены и убыванию названия.

## Решение
```SQL
SELECT IF (author = "Донцова Дария", author, "Донцова Дария") AS author,
       IF (title, "Евлампия Романова и "+ title, CONCAT("Евлампия Романова и ", title)) AS title,
       ROUND(price * 1.42,2) AS price      
  FROM book
 ORDER BY price DESC, title DESC;
```

```
Query result:
+---------------+-------------------------------------------+---------+
| author        | title                                     | price   |
+---------------+-------------------------------------------+---------+
| Донцова Дарья | Евлампия романова и Братья Карамазовы     | 1134.59 |
| Донцова Дарья | Евлампия романова и Мастер и Маргарита    | 952.81  |
| Донцова Дарья | Евлампия романова и Стихотворения и поэмы | 923.00  |
| Донцова Дарья | Евлампия романова и Белая гвардия         | 767.51  |
| Донцова Дарья | Евлампия романова и Идиот                 | 653.20  |
+---------------+-------------------------------------------+---------+
```

# Задача 2
Определить стоимость доставки:
- для книг стоимостью 500 и менее, установить в размере 99,99
- при количестве книг на складе менее 5, установить в размере 149.99
- для остальных случаев доставка должна быть бесплатной
Определить новую стоимость для книг:
- для книг, совокупной стоимостью более 5000, добавить 20% к стоимости за экземпляр
- для остальных случаев снизить стоимость одного экземпляра на 20%
Настроить фильтр при выборке:
- только позиции творчества авторов: Булгаков и Есенин, при количестве экземпляров на складе: от 3 до 14 включительно.
Сортировку выполнить:
- по имени автора в порядке возрастания
- затем по названию в порядке убывания
- по стоимости доставки (от меньшей к большей)
В таблице должны быть отображены данные:
- автора
- название
- цену, как real_price
- количество
- новую цену, как new_price
- стоимость доставки, как delivery_price


## Решение
```SQL
SELECT title, author, price AS real_price,     
    IF (price * amount > 5000, ROUND(price * 1.2,2), ROUND(price * 0.8,2)) AS new_price,    
    IF (price <= 500, 99.99, IF (amount < 5, 149.99, 0)) AS delivery_price      
  FROM book
 WHERE author IN ('Булгаков М.А.','Есенин С.А.')
             AND amount BETWEEN 3 AND 14;
```

```
+--------------------+---------------+------------+-----------+----------------+
| title              | author        | real_price | new_price | delivery_price |
+--------------------+---------------+------------+-----------+----------------+
| Мастер и Маргарита | Булгаков М.А. | 670.99     | 536.79    | 149.99         |
| Белая гвардия      | Булгаков М.А. | 540.50     | 432.40    | 0              |
+--------------------+---------------+------------+-----------+----------------+
```
